<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ladder Calculator</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Ladder Calculator</h1>

        <div class="input-section">
            <h2>現状の入力</h2>
            <div class="input-group">
                <label for="wins">現在の勝ち数:</label>
                <input type="number" id="wins" value="0" min="0">
            </div>
            <div class="input-group">
                <label for="losses">現在の負け数:</label>
                <input type="number" id="losses" value="0" min="0">
            </div>
            <div class="input-group">
                <label for="currentRate">現在のレート:</label>
                <input type="number" id="currentRate" value="" placeholder="例: 1500" min="0">
            </div>
            <div class="input-group">
                <label for="targetRateIncrease">目標レート増加量:</label>
                <input type="number" id="targetRateIncrease" value="200" min="0">
            </div>
            <div class="input-group">
                <label for="totalPlayers">ランクマッチの参加人数:</label>
                <input type="number" id="totalPlayers" value="10000" min="1">
            </div>

            <div class="input-group">
                <label>Tierの境界レート設定 (必須入力)</label>
                <p class="description">各Tierの最低レートを設定します。正確な値を入力することでより詳細なシミュレーションが可能です。</p>
                <div id="tierRateBoundaries">
                    </div>
            </div>

            <h2>対戦相手レート別の勝利割合 (%)</h2>
            <p class="description">自分よりレートが高い/低い/同等の相手とマッチングした場合の勝率を入力してください。</p>
            <div class="input-group">
                <label for="winRateVsMuchHigher">かなりレートが高い相手:</label>
                <input type="number" id="winRateVsMuchHigher" value="50" min="0" max="100">
            </div>
            <div class="input-group">
                <label for="winRateVsSlightlyHigher">ややレートが高い相手:</label>
                <input type="number" id="winRateVsSlightlyHigher" value="50" min="0" max="100">
            </div>
            <div class="input-group">
                <label for="winRateVsEqual">同等のレートの相手:</label>
                <input type="number" id="winRateVsEqual" value="50" min="0" max="100">
            </div>
            <div class="input-group">
                <label for="winRateVsSlightlyLower">ややレートが低い相手:</label>
                <input type="number" id="winRateVsSlightlyLower" value="50" min="0" max="100">
            </div>
            <div class="input-group">
                <label for="winRateVsMuchLower">かなりレートが低い相手:</label>
                <input type="number" id="winRateVsMuchLower" value="50" min="0" max="100">
            </div>

            <button id="calculateButton">計算する</button>
        </div>

        <div class="output-section">
            <h2>計算結果</h2>
            <p>現在の総試合数: <span id="totalMatchesDisplay"></span></p>
            <p>現在の勝率: <span id="currentWinRate"></span></p>
            <p>100戦後のレート期待値: <span id="expectedRate100Matches"></span></p>
            <p>目標レート達成までの必要勝利数: <span id="neededWinsForTarget"></span></p>

            <h3>詳細なレート変動量 (1勝または1敗あたり)</h3>
            <p class="description">各対戦相手のレート帯に対する1勝あたりのレート増加量、1敗あたりのレート減少量を表示します。相手のレート差は、現在のレートに対しての目安です。</p>
            <table id="rateChangeTable">
                <thead>
                    <tr>
                        <th>相手レートとの差</th>
                        <th>勝利時増減</th>
                        <th>敗北時増減</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>かなり高い</td><td id="gainMuchHigherCalculated"></td><td id="lossMuchHigherCalculated"></td></tr>
                    <tr><td>やや高い</td><td id="gainSlightlyHigherCalculated"></td><td id="lossSlightlyHigherCalculated"></td></tr>
                    <tr><td>同等</td><td id="gainEqualCalculated"></td><td id="lossEqualCalculated"></td></tr>
                    <tr><td>やや低い</td><td id="gainSlightlyLowerCalculated"></td><td id="lossSlightlyLowerCalculated"></td></tr>
                    <tr><td>かなり低い</td><td id="gainMuchLowerCalculated"></td><td id="lossMuchLowerCalculated"></td></tr>
                </tbody>
            </table>

            <h3>Tierと推定レート帯の目安</h3>
            <div id="tierRateEstimates">
                <p>ランクマッチ参加人数とTier割合に基づき、Tierごとの順位範囲と推定レート帯を表示します。</p>
                <table id="tierRateTable">
                    <thead>
                        <tr>
                            <th>Tier</th> <th>推定レート帯</th> <th>順位範囲</th> </tr>
                    </thead>
                    <tbody>
                        </tbody>
                </table>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>