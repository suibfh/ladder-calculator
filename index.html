<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ladder Calculator</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Ladder Calculator</h1>

        <div class="input-section">
            <h2>現状の入力</h2>
            <div class="input-group">
                <label for="wins">現在の勝ち数:</label>
                <input type="number" id="wins" value="0" min="0">
            </div>
            <div class="input-group">
                <label for="losses">現在の負け数:</label>
                <input type="number" id="losses" value="0" min="0">
            </div>
            <div class="input-group">
                <label for="currentRate">現在のレート:</label>
                <input type="number" id="currentRate" value="" placeholder="例: 1500" min="0">
            </div>
            <div class="input-group">
                <label for="targetRateIncrease">目標レート増加量:</label>
                <input type="number" id="targetRateIncrease" value="200" min="0">
            </div>
            <div class="input-group">
                <label for="totalPlayers">ランクマッチの参加人数:</label>
                <input type="number" id="totalPlayers" value="250" placeholder="例: 10000" min="1"> </div>
        </div>

        <div class="input-section">
            <h2>Tierの境界レート設定 (任意)</h2>
            <p class="description">もし分かるようであれば、各Tierの最低レートを入力してください。シミュレーション精度が向上します。<br>未入力の場合は、参加人数とTier割合から自動で推定します。</p>
            <div id="tierRateBoundaries">
                </div>
        </div>

        <div class="input-section">
            <h2>対戦相手レート別の勝利割合</h2>
            <p class="description">各レート帯の相手にどのくらいの確率で勝利しているか設定してください。</p>
            <div class="input-group">
                <label for="winRateVsMuchHigher">自分よりかなりレートが高い相手への勝利割合 (%):</label>
                <input type="number" id="winRateVsMuchHigher" value="" placeholder="例: 30" min="0" max="100">
            </div>
            <div class="input-group">
                <label for="winRateVsSlightlyHigher">自分よりややレートが高い相手への勝利割合 (%):</label>
                <input type="number" id="winRateVsSlightlyHigher" value="" placeholder="例: 45" min="0" max="100">
            </div>
            <div class="input-group">
                <label for="winRateVsEqual">自分と同等のレートの相手への勝利割合 (%):</label>
                <input type="number" id="winRateVsEqual" value="" placeholder="例: 50" min="0" max="100">
            </div>
            <div class="input-group">
                <label for="winRateVsSlightlyLower">自分よりややレートが低い相手への勝利割合 (%):</label>
                <input type="number" id="winRateVsSlightlyLower" value="" placeholder="例: 55" min="0" max="100">
            </div>
            <div class="input-group">
                <label for="winRateVsMuchLower">自分よりかなりレートが低い相手への勝利割合 (%):</label>
                <input type="number" id="winRateVsMuchLower" value="" placeholder="例: 70" min="0" max="100">
            </div>
        </div>

        <button id="calculateButton">結果を計算</button>

        <div class="output-section">
            <h2>計算結果</h2>
            <p>現在の総試合数: <span id="totalMatchesDisplay">--</span></p>
            <p>現在の勝率: <span id="currentWinRate">--.-%</span></p>
            <p>100戦後のレート期待値: <span id="expectedRate100Matches">----</span></p>
            <p>目標レート達成までの必要勝利数: <span id="neededWinsForTarget">----</span></p>

            <h3>詳細なレート変動量 (1勝または1敗あたり)</h3>
            <table id="rateChangeTable">
                <thead>
                    <tr>
                        <th>相手レートとの差</th>
                        <th>勝利時増減</th>
                        <th>敗北時増減</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>かなり高い</td><td id="gainMuchHigherCalculated"></td><td id="lossMuchHigherCalculated"></td></tr>
                    <tr><td>やや高い</td><td id="gainSlightlyHigherCalculated"></td><td id="lossSlightlyHigherCalculated"></td></tr>
                    <tr><td>同等</td><td id="gainEqualCalculated"></td><td id="lossEqualCalculated"></td></tr>
                    <tr><td>やや低い</td><td id="gainSlightlyLowerCalculated"></td><td id="lossSlightlyLowerCalculated"></td></tr>
                    <tr><td>かなり低い</td><td id="gainMuchLowerCalculated"></td><td id="lossMuchLowerCalculated"></td></tr>
                </tbody>
            </table>

            <h3>Tierと推定レート帯の目安</h3>
            <div id="tierRateEstimates">
                <p>ランクマッチ参加人数とTier割合に基づき、レート帯を推定します。</p>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
